---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
rm(list=ls())
require(tidyverse)
require(terra)
require(FedData)
require(sf)
require(tidyterra)
```

I've zoomed in on one of the study areas in Alabama that we used in the previous lab. Here we are loading the boundary of that study area and downloading NLCD data relevant to that particular study area. Note that you may find the get_nlcd() function very handy in your work going forward, as it brings NLCD data straight in without you having to download the entire dataset (nationwide) to your computer.

```{r}
studyArea = st_read('/vsicurl/https://github.com/ValenteJJ/SpatialEcology/raw/main/Week4/studyArea.shp')
nlcd = get_nlcd(studyArea, label='AlLandscape', year=2011)

plot(nlcd)
```

For our purposes, we are going to simplify this raster by condensing some of these land cover categories.

```{r}

tmp = data.frame('ID' = c(11, 21, 22, 23, 24, 31, 41, 42, 43, 52, 71, 81, 82),
                 'category' = c('wetland', rep('developed', 4), 'open', rep('forest', 3), 'open', 'grassland', rep('agriculture', 2)))

tmp

nlcd = categories(nlcd, value=tmp)

ggplot(nlcd, aes(x=x, y=y, fill=category)) +
  geom_raster()+
  scale_fill_manual(values=c('blue', 'black', 'gray', 'darkolivegreen', 'orange', 'yellow'))


```

# Patch-level metrics


